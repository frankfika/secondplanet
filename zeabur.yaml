services:
  web:
    type: static
    root: packages/web
    buildCommand: pnpm install --prod=false && pnpm --filter @secondplanet/web build
    distDir: dist
    env:
      - name: VITE_API_URL
        value: https://YOUR_SERVER_SERVICE.zeabur.app/api

  server:
    type: node
    root: apps/server
    buildCommand: pnpm install --prod=false && pnpm --filter @secondplanet/server db:push && pnpm --filter @secondplanet/server build
    startCommand: node dist/main.js
    port: 3001
    env:
      - name: DATABASE_URL
        value: ""
      - name: JWT_SECRET
        value: ""
      - name: JWT_EXPIRES_IN
        value: "7d"
      - name: JWT_REFRESH_SECRET
        value: ""
      - name: JWT_REFRESH_EXPIRES_IN
        value: "30d"
      - name: CORS_ORIGIN
        value: https://YOUR_WEB_SERVICE.zeabur.app
